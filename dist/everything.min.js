var gameLogic;!function(a){function b(){return[["WLion","L","WTrap","WDen","WTrap","L","WTiger"],["L","WDog","L","WTrap","L","WCat","L"],["WMouse","L","WLeopard","L","WWolf","L","WElephant"],["L","R","R","L","R","R","L"],["L","R","R","L","R","R","L"],["L","R","R","L","R","R","L"],["BElephant","L","BWolf","L","BLeopard","L","BMouse"],["L","BCat","L","BTrap","L","BDog","L"],["BTiger","L","BTrap","BDen","BTrap","L","BLion"]]}function c(b,c){for(var e=d(c),f=0;f<a.ROWS;f++)for(var g=0;g<a.COLS;g++){var h=b[f][g],i={row:f,col:g};if(h[0]===e)switch(h.substring(1)){case"Mouse":if(O(b,c,i))return!1;break;case"Cat":if(M(b,c,i))return!1;break;case"Wolf":if(K(b,c,i))return!1;break;case"Dog":if(I(b,c,i))return!1;break;case"Leopard":if(G(b,c,i))return!1;break;case"Tiger":if(E(b,c,i))return!1;break;case"Lion":if(C(b,c,i))return!1;break;case"Elephant":if(A(b,c,i))return!1}}return!0}function d(a){return 0===a?"B":"W"}function e(a){return 0===a?"W":"B"}function f(a){switch(a){case"Mouse":return 0;case"Cat":return 1;case"Wolf":return 2;case"Dog":return 3;case"Leopard":return 4;case"Tiger":return 5;case"Lion":return 6;case"Elephant":return 7}}function g(b){return b.row<0||b.row>=a.ROWS||b.col<0||b.col>=a.COLS?!0:!1}function h(b,c){if(0===b){for(var d=0;d<a.BlackTraps.length;d++){var e=a.BlackTraps[d];if(angular.equals(e,c))return!0}return!1}if(1===b){for(var f=0;f<a.WhiteTraps.length;f++){var e=a.WhiteTraps[f];if(angular.equals(e,c))return!0}return!1}}function i(b){for(var c=0;c<a.RiverPos.length;c++){var d=a.RiverPos[c];if(angular.equals(d,b))return!0}return!1}function j(b){for(var c=0;c<a.BlackTraps.length;c++){var d=a.BlackTraps[c];if(angular.equals(d,b))return!0}return!1}function k(b){for(var c=0;c<a.WhiteTraps.length;c++){var d=a.WhiteTraps[c];if(angular.equals(d,b))return!0}return!1}function l(b){return angular.equals(a.BlackDen,b)?!0:!1}function m(b){return angular.equals(a.WhiteDen,b)?!0:!1}function n(b,c){return 0===b?angular.equals(c,a.BlackDen)?!0:!1:1===b?angular.equals(c,a.WhiteDen)?!0:!1:void 0}function o(a,b){var c=b.row,d=b.col;return"L"===a[c][d]||"R"===a[c][d]||"WTrap"===a[c][d]||"WDen"===a[c][d]||"BTrap"===a[c][d]||"BDen"===a[c][d]?!0:!1}function p(a,b,c){var d=c.row,e=c.col;return o(a,c)?!1:"B"===a[d][e].charAt(0)&&0===b?!0:"W"===a[d][e].charAt(0)&&1===b?!0:!1}function q(b){return"BDen"!==b[a.BlackDen.row][a.BlackDen.col]?"W":"WDen"!==b[a.WhiteDen.row][a.WhiteDen.col]?"B":""}function r(a,b,c){var d=[],e={row:c.row-1,col:c.col},f={row:c.row+1,col:c.col},g={row:c.row,col:c.col-1},h={row:c.row,col:c.col+1};return s(a,b,c,e)&&d.push(e),s(a,b,c,f)&&d.push(f),s(a,b,c,g)&&d.push(g),s(a,b,c,h)&&d.push(h),d}function s(a,b,c,d){if(g(d)||i(d)||n(b,d))return!1;if(c.row!==d.row&&c.col!==d.col)return!1;if(c.row===d.row){if(1!==Math.abs(c.col-d.col))return!1}else if(c.col===d.col){if(1!==Math.abs(c.row-d.row))return!1}else if(angular.equals(c,d))return!1;return y(a,b,c,d)}function t(a,b,c){if(b.row===c.row){var d,e;return b.col<c.col?(d=a[b.row][b.col+1],e=a[b.row][b.col+2]):(d=a[b.row][b.col-1],e=a[b.row][b.col-2]),"Mouse"===d.substring(1)||"Mouse"===e.substring(1)?!0:!1}var d,e,f;return b.row<c.row?(d=a[b.row+1][b.col],e=a[b.row+2][b.col],f=a[b.row+3][b.col]):(d=a[b.row-1][b.col],e=a[b.row-2][b.col],f=a[b.row-3][b.col]),"Mouse"===d.substring(1)||"Mouse"===e.substring(1)||"Mouse"===f.substring(1)?!0:!1}function u(a,b,c){var d=[],e={row:c.row-1,col:c.col};i(e)?t(a,c,e)||(e.row=e.row-3,v(a,b,c,e)&&d.push(e)):v(a,b,c,e)&&d.push(e);var f={row:c.row+1,col:c.col};i(f)?t(a,c,f)||(f.row=f.row+3,v(a,b,c,f)&&d.push(f)):v(a,b,c,f)&&d.push(f);var g={row:c.row,col:c.col-1};i(g)?t(a,c,g)||(g.col=g.col-2,v(a,b,c,g)&&d.push(g)):v(a,b,c,g)&&d.push(g);var h={row:c.row,col:c.col+1};return i(h)?t(a,c,h)||(h.col=h.col+2,v(a,b,c,h)&&d.push(h)):v(a,b,c,h)&&d.push(h),d}function v(a,b,c,d){if(g(d)||i(d)||n(b,d))return!1;if(c.row!==d.row&&c.col!==d.col)return!1;if(c.row===d.row){if(1!==Math.abs(c.col-d.col)&&3!==Math.abs(c.col-d.col))return!1}else if(c.col===d.col){if(1!==Math.abs(c.row-d.row)&&4!==Math.abs(c.row-d.row))return!1}else if(angular.equals(c,d))return!1;if(c.row===d.row){var e;return c.col<d.col?(e={row:c.row,col:c.col+1},i(e)?d.col-c.col===1?!1:t(a,c,d)?!1:y(a,b,c,d):d.col-c.col===3?!1:y(a,b,c,d)):(e={row:c.row,col:c.col-1},i(e)?c.col-d.col===1?!1:t(a,c,d)?!1:y(a,b,c,d):c.col-d.col===3?!1:y(a,b,c,d))}var e;return c.row<d.row?(e={row:c.row+1,col:c.col},i(e)?d.col-c.col===1?!1:t(a,c,d)?!1:y(a,b,c,d):d.col-c.col===4?!1:y(a,b,c,d)):(e={row:c.row-1,col:c.col},i(e)?c.col-d.col===1?!1:t(a,c,d)?!1:y(a,b,c,d):c.col-d.col===4?!1:y(a,b,c,d))}function w(a,b,c){var d=[],e={row:c.row-1,col:c.col},f={row:c.row+1,col:c.col},g={row:c.row,col:c.col-1},h={row:c.row,col:c.col+1};return x(a,b,c,e)&&d.push(e),x(a,b,c,f)&&d.push(f),x(a,b,c,g)&&d.push(g),x(a,b,c,h)&&d.push(h),d}function x(a,b,c,d){if(g(d)||n(b,d))return!1;if(c.row!==d.row&&c.col!==d.col)return!1;if(c.row===d.row){if(1!==Math.abs(c.col-d.col))return!1}else if(c.col===d.col){if(1!==Math.abs(c.row-d.row))return!1}else if(angular.equals(c,d))return!1;return y(a,b,c,d)}function y(a,b,c,d){if(o(a,d))return!0;if(p(a,b,d))return!1;var e=a[c.row][c.col],g=a[d.row][d.col],j=f(e.substring(1)),k=f(g.substring(1));return h(b,d)?!0:j>=k?7===j&&0===k?!1:!0:0===j&&7===k?i(c)?!1:!0:!1}function z(a,b,c){var d=r(a,b,c);return d}function A(a,b,c){return 0!==z(a,b,c).length}function B(a,b,c){var d=u(a,b,c);return d}function C(a,b,c){return 0!==B(a,b,c).length}function D(a,b,c){var d=u(a,b,c);return d}function E(a,b,c){return 0!==D(a,b,c).length}function F(a,b,c){var d=r(a,b,c);return d}function G(a,b,c){return 0!==F(a,b,c).length}function H(a,b,c){var d=r(a,b,c);return d}function I(a,b,c){return 0!==H(a,b,c).length}function J(a,b,c){var d=r(a,b,c);return d}function K(a,b,c){return 0!==J(a,b,c).length}function L(a,b,c){var d=r(a,b,c);return d}function M(a,b,c){return 0!==L(a,b,c).length}function N(a,b,c){var d=w(a,b,c);return d}function O(a,b,c){return 0!==N(a,b,c).length}function P(b,c){var e=[];if(!b)return[];for(var f=d(c),g=0;g<a.ROWS;g++)for(var h=0;h<a.COLS;h++){var i=b[g][h];if("L"!==i&&"R"!==i&&i.charAt(0)===f){var j,k={row:g,col:h};switch(i.substring(1)){case"Elephant":if(j=z(b,c,k),j.length>0)for(var l=0;l<j.length;l++){var m=j[l];e.push(m)}break;case"Lion":if(j=B(b,c,k),j.length>0)for(var n=0;n<j.length;n++){var m=j[n];e.push(m)}break;case"Tiger":if(j=D(b,c,k),j.length>0)for(var o=0;o<j.length;o++){var m=j[o];e.push(m)}break;case"Leopard":if(j=F(b,c,k),j.length>0)for(var p=0;p<j.length;p++){var m=j[p];e.push(m)}break;case"Dog":if(j=H(b,c,k),j.length>0)for(var q=0;q<j.length;q++){var m=j[q];e.push(m)}break;case"Wolf":if(j=J(b,c,k),j.length>0)for(var r=0;r<j.length;r++){var m=j[r];e.push(m)}break;case"Cat":if(j=L(b,c,k),j.length>0)for(var s=0;s<j.length;s++){var m=j[s];e.push(m)}break;case"Mouse":if(j=N(b,c,k),j.length>0)for(var t=0;t<j.length;t++){var m=j[t];e.push(m)}}}}return e}function Q(a,b,c){var d,e=a[c.row][c.col];switch(e.substring(1)){case"Elephant":d=z(a,b,c);break;case"Lion":d=B(a,b,c);break;case"Tiger":d=D(a,b,c);break;case"Leopard":d=F(a,b,c);break;case"Dog":d=H(a,b,c);break;case"Wolf":d=J(a,b,c);break;case"Cat":d=L(a,b,c);break;case"Mouse":d=N(a,b,c)}return d}function R(a,e,f,g){a||(a=b());var h=a[f.row][f.col],n=a[g.row][g.col],o=d(e);if(f.row===g.row&&f.col===g.col)throw new Error("Cannot move to same position.");if("Den"===n.substring(1)&&n[0]===o)throw new Error("Cannot move into you own Den");if(h.charAt(0)!==o)throw new Error("R"===h||"L"===h?"There is no piece to move":"Cannot move opponent's piece");if("Den"===h.substring(1)||"Trap"===h.substring(1))throw new Error("There is no piece to move");if(""!==q(a)||c(a,e))throw new Error("Cannot make a move if the game is over!");if("L"!==n&&"R"!==n&&"Trap"!==n.substring(1)&&"Den"!==n.substring(1)&&o===n.charAt(0))throw new Error("One can only make a move in an empty position or capture opponent's piece!");var p=angular.copy(a),r=h.substring(1);switch(r){case"Elephant":if(!s(a,e,f,g))throw new Error("Illegal move for Elephant.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Lion":if(!v(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Tiger":if(!v(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Leopard":if(!s(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Dog":if(!s(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Wolf":if(!s(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Cat":if(!s(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;case"Mouse":if(!x(a,e,f,g))throw new Error("Illegal move for Lion.");p[f.row][f.col]=i(f)?"R":j(f)?"BTrap":k(f)?"WTrap":l(f)?"BDen":m(f)?"WDen":"L",p[g.row][g.col]=h;break;default:throw new Error("Unknown piece type!")}var t,u=q(p);return t=""!==u||c(p,1-e)?{endMatch:{endMatchScores:"B"===u?[1,0]:"W"===u?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-e}},[t,{set:{key:"board",value:p}},{set:{key:"deltaFrom",value:{row:f.row,col:f.col}}},{set:{key:"deltaTo",value:{row:g.row,col:g.col}}}]}function S(a){var b=a.move,c=a.turnIndexBeforeMove,d=a.stateBeforeMove;try{var e=b[2].set.value,f=b[3].set.value,g=d.board,h=R(g,c,e,f);if(!angular.equals(b,h))return!1}catch(i){return!1}return!0}a.ROWS=9,a.COLS=7,a.BlackTraps=[{row:8,col:2},{row:7,col:3},{row:8,col:4}],a.WhiteTraps=[{row:0,col:2},{row:1,col:3},{row:0,col:4}],a.RiverPos=[{row:3,col:1},{row:3,col:2},{row:3,col:4},{row:3,col:5},{row:4,col:1},{row:4,col:2},{row:4,col:4},{row:4,col:5},{row:5,col:1},{row:5,col:2},{row:5,col:4},{row:5,col:5}],a.BlackDen={row:8,col:3},a.WhiteDen={row:0,col:3},a.getInitialBoard=b,a.getTurn=d,a.getOpponentTurn=e,a.getElephantPossibleMoves=z,a.canElephantMoveAnywhere=A,a.getLionPossibleMoves=B,a.canLionMoveAnywhere=C,a.getTigerPossibleMoves=D,a.canTigerMoveAnywhere=E,a.getLeopardPossibleMoves=F,a.canLeopardMoveAnywhere=G,a.getDogPossibleMoves=H,a.canDogMoveAnywhere=I,a.getWolfPossibleMoves=J,a.canWolfMoveAnywhere=K,a.getCatPossibleMoves=L,a.canCatMoveAnywhere=M,a.getMousePossibleMoves=N,a.canMouseMoveAnywhere=O,a.getPossibleMoves=P,a.getPiecePossibleMoves=Q,a.createMove=R,a.isMoveOk=S}(gameLogic||(gameLogic={}));var game;!function(a){function b(){console.log("Translation of 'RULES_OF_JUNGLE' is "+translate("RULES_OF_JUNGLE")),resizeGameAreaService.setWidthToHeight(7/9),gameService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:gameLogic.isMoveOk,updateUI:e}),document.addEventListener("animationend",c,!1),document.addEventListener("webkitAnimationEnd",c,!1),document.addEventListener("oanimationend",c,!1),dragAndDropService.addDragListener("gameArea",f)}function c(){$rootScope.$apply(function(){log.info("Animation ended"),B=!0,D&&d()})}function d(){$timeout(function(){gameService.makeMove(aiService.createComputerMove(F.board,G,{millisecondsLimit:1e3}))},500)}function e(a){log.info("Game got updateUI:",a),B=!1,E=a,F=a.stateAfterMove,F.board||(F.board=gameLogic.getInitialBoard()),C=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,G=a.turnIndexAfterMove,D=C&&""===a.playersInfo[a.yourPlayerIndex].playerId,D&&(C=!1,F.delta||d()),M="playWhite"===a.playMode?!0:!1}function f(a,b,c){H=document.getElementById("gameArea"),I=document.getElementById("draggingLines"),J=document.getElementById("verticalDraggingLine"),K=document.getElementById("horizontalDraggingLine");var d=b-H.offsetLeft,e=c-H.offsetTop;if(0>d||0>e||d>=H.clientWidth||e>=H.clientHeight){if(I.style.display="none",!L)return;var f=h();j({top:e-f.height/2,left:d-f.width/2})}else{var m=Math.floor(gameLogic.COLS*d/H.clientWidth),o=Math.floor(gameLogic.ROWS*e/H.clientHeight),p=m,q=o;M&&(q=gameLogic.ROWS-o,p=gameLogic.COLS-m);var r=i(q,p);if(J.setAttribute("x1",r.width.toString()),J.setAttribute("x2",r.width.toString()),K.setAttribute("y1",r.height.toString()),K.setAttribute("y2",r.height.toString()),"touchstart"===a&&N.row<0&&N.col<0){var s=F.board[q][p];if(s&&g(s)){N={row:o,col:m},L=document.getElementById("img_"+x(o,m)+"_"+o+"x"+m),L&&(L.style["z-index"]=++Q,L.style.width="115%",L.style.height="115%",L.style.position="absolute"),P=n(q,p);for(var t=0;t<P.length;t++)P[t].style.border="5px solid #99FF33"}}if(!L)return void(I.style.display="none");"touchend"===a||"touchcancel"===a||"touchleave"===a||"mouseup"===a?(I.style.display="none",O={row:o,col:m},l(N,O)):(j(k(o,m)),r=i(o,m))}if("touchend"===a||"touchcancel"===a||"touchleave"===a||"mouseup"===a){j(k(N.row,N.col)),L.style.width="100%",L.style.height="100%",L.style.position="absolute";for(var t=0;t<P.length;t++)P[t].style.border="1px solid #B8860B";N={row:-1,col:-1},O={row:-1,col:-1},L=null,P=[]}}function g(a){if("L"===a||"R"===a||"WTrap"===a||"BTrap"===a||"WDen"===a||"BDen"===a)return!1;var b=gameLogic.getTurn(G);return b===a[0]?!0:!1}function h(){var a={width:H.clientWidth/gameLogic.COLS,height:H.clientHeight/gameLogic.ROWS};return a}function i(a,b){var c=h(),d={width:b*c.width+c.width/2,height:a*c.height+c.height/2};return d}function j(a){var b=k(N.row,N.col);L.style.left=a.left-b.left+"px",L.style.top=a.top-b.top+"px"}function k(a,b){var c=h(),d={top:a*c.height,left:b*c.width};return d}function l(a,b){m(a,b)}function m(a,b){var c="Dragged piece from "+a.row+"*"+a.col+" to "+b.row+"*"+b.col;if(log.info(c),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(C){M&&(a.row=gameLogic.ROWS-a.row,a.col=gameLogic.COLS-a.col,b.row=gameLogic.ROWS-b.row,b.col=gameLogic.COLS-b.col);try{var d=gameLogic.createMove(F.board,E.turnIndexAfterMove,a,b);C=!1,gameService.makeMove(d),log.info(["Make movement from "+a.row+"x"+a.col+" to "+b.row+"x"+b.col])}catch(e){return void log.info(["Illegal movement from "+a.row+"x"+a.col+" to "+b.row+"x"+b.col])}}}function n(a,b){for(var c={row:a,col:b},d=gameLogic.getPiecePossibleMoves(F.board,E.turnIndexAfterMove,c),e=[],f=0;f<d.length;f++){var g=d[f],h=g;M&&(h.row=gameLogic.ROWS-h.row,h.col=gameLogic.COLS-h.col);var i="background"+h.row+"x"+h.col;e.push(document.getElementById(i))}return e}function o(a,b){M&&(a=gameLogic.ROWS-a,b=gameLogic.COLS-b);var c=F.board[a][b];return"L"===c||"R"===c||"WDen"===c||"BDen"===c||"WTrap"===c||"BTrap"===c?!1:!0}function p(a,b){return!q(a,b)}function q(a,b){return a>=3&&5>=a&&b>=1&&2>=b||a>=3&&5>=a&&b>=4&&5>=b?!0:!1}function r(a,b){return 0===a&&2===b||1===a&&3===b||0===a&&4===b?!0:!1}function s(a,b){return 8===a&&2===b||7===a&&3===b||8===a&&4===b?!0:!1}function t(a,b){return 0===a&&3===b?!0:!1}function u(a,b){return 8===a&&3===b?!0:!1}function v(a,b){M&&(a=gameLogic.ROWS-a,b=gameLogic.COLS-b);var c=F.board[a][b];return w(c)}function w(a){switch(a){case"WLion":return"imgs/WLion.gif";case"WTiger":return"imgs/WTiger.gif";case"WDog":return"imgs/WDog.gif";case"WCat":return"imgs/WCat.gif";case"WMouse":return"imgs/WMouse.gif";case"WLeopard":return"imgs/WLeopard.gif";case"WWolf":return"imgs/WWolf.gif";case"WElephant":return"imgs/WElephant.gif";case"BLion":return"imgs/BLion.gif";case"BTiger":return"imgs/BTiger.gif";case"BDog":return"imgs/BDog.gif";case"BCat":return"imgs/BCat.gif";case"BMouse":return"imgs/BMouse.gif";case"BLeopard":return"imgs/BLeopard.gif";case"BWolf":return"imgs/BWolf.gif";case"BElephant":return"imgs/BElephant.gif";default:return""}}function x(a,b){M&&(a=gameLogic.ROWS-a,b=gameLogic.COLS-b);var c=F.board[a][b];return"R"===c||"L"===c||"WDen"===c||"BDen"===c||"WTrap"===c||"BTrap"===c?"":c}function y(a,b){M&&(a=gameLogic.ROWS-a,b=gameLogic.COLS-b);var c=F.board[a][b];return"B"===c.charAt(0)&&"BTrap"!==c&&"BDen"!==c}function z(a,b){M&&(a=gameLogic.ROWS-a,b=gameLogic.COLS-b);var c=F.board[a][b];return"W"===c.charAt(0)&&"WTrap"!==c&&"WDen"!==c}function A(a,b){if(!F.board)return!0;M&&(a=gameLogic.ROWS-a,b=gameLogic.COLS-b);var c=F.board[a][b],d=gameLogic.getTurn(G);if(d===c.charAt(0)&&"Den"!==c.substring(1)&&"Trap"!==c.substring(1)){var e={row:a,col:b},f=gameLogic.getPiecePossibleMoves(F.board,E.turnIndexAfterMove,e);return f.length>0?!0:!1}return!1}var B=!1,C=!1,D=!1,E=null,F=null,G=null;a.isHelpModalShown=!1;var H,I,J,K,L,M=!1,N={row:-1,col:-1},O={row:-1,col:-1},P=[],Q=61;a.init=b,a.handleDragEvent=f,a.shouldShowImage=o,a.isLand=p,a.isRiver=q,a.isWTrap=r,a.isBTrap=s,a.isWDen=t,a.isBDen=u,a.getImageSrc=v,a.getPieceKindId=x,a.isBlackPiece=y,a.isWhitePiece=z,a.canSelect=A}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_JUNGLE:"Rules of Jungle",RULES_SLIDE1:"There are two players, black and white. Black goes first. Each player has eight different pieces representing different animals.",RULES_SLIDE2:"Higher ranking pieces can capture all pieces of identical or weaker ranking. However there is one exception: The mouse may capture the elephant, while the elephant cannot capture the mouse",RULES_SLIDE3:"The animal ranking, from strongest to weakest, is: Elephant, Lion, Tiger, Leopard, Wolf, Dog, Cat, Mouse",RULES_SLIDE4:"The rat is the only animal that is allowed to go onto a water square. The rat may not capture the elephant or another rat on land directly from a water square.",RULES_SLIDE5:"Lions and tigers are able to leap over water (either horizontally or vertically). They cannot jump over the water when a rat is on any of the intervening water squares.",RULES_SLIDE6:"When a piece is in an opponent's trap, any of the opponent's pieces may capture it regardless its strength. A piece in one of its own traps is unaffected.",CLOSE:"Close"}),game.init()});var aiService;!function(a){function b(a,b){var c=[],d=[],e=[],f={lowLevelMoves:c,midLevelMoves:d,highLevelMoves:e};if(!a)return f;for(var g=gameLogic.getTurn(b),h=gameLogic.getOpponentTurn(b),i=0;i<gameLogic.ROWS;i++)for(var j=0;j<gameLogic.COLS;j++){var k=a[i][j];if("L"!==k&&"R"!==k&&k.charAt(0)===g){var l,m={row:i,col:j};switch(k.substring(1)){case"Elephant":if(l=gameLogic.getElephantPossibleMoves(a,b,m),l.length>0)for(var n=0;n<l.length;n++){var o=l[n],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Lion":if(l=gameLogic.getLionPossibleMoves(a,b,m),l.length>0)for(var r=0;r<l.length;r++){var o=l[r],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Tiger":if(l=gameLogic.getTigerPossibleMoves(a,b,m),l.length>0)for(var s=0;s<l.length;s++){var o=l[s],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Leopard":if(l=gameLogic.getLeopardPossibleMoves(a,b,m),l.length>0)for(var t=0;t<l.length;t++){var o=l[t],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Dog":if(l=gameLogic.getDogPossibleMoves(a,b,m),l.length>0)for(var u=0;u<l.length;u++){var o=l[u],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Wolf":if(l=gameLogic.getWolfPossibleMoves(a,b,m),l.length>0)for(var v=0;v<l.length;v++){var o=l[v],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Cat":if(l=gameLogic.getCatPossibleMoves(a,b,m),l.length>0)for(var w=0;w<l.length;w++){var o=l[w],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}break;case"Mouse":if(l=gameLogic.getMousePossibleMoves(a,b,m),l.length>0)for(var x=0;x<l.length;x++){var o=l[x],p=g+"Den",q=h+"Trap";"R"===a[o.row][o.col]||"L"===a[o.row][o.col]?c.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===q?e.push(gameLogic.createMove(a,b,m,o)):a[o.row][o.col]===p?c.push(gameLogic.createMove(a,b,m,o)):d.push(gameLogic.createMove(a,b,m,o))}}}}return f={lowLevelMoves:c,midLevelMoves:d,highLevelMoves:e}}function c(a,c){for(var d=gameLogic.getTurn(c),e=(gameLogic.getOpponentTurn(c),0),f=0;f<gameLogic.ROWS;f++)for(var g=0;g<gameLogic.COLS;g++){var h=a[f][g];h[0]===d&&"Den"!==h.substring(1)&&"Trap"!==h.substring(1)&&e++}var i=b(a,c),j=i.lowLevelMoves,k=i.midLevelMoves,l=i.highLevelMoves,m=0;return 0!==l.length?l[0]:1===k.length?k[0]:k.length>1?(m=Math.floor(Math.random()*k.length),k[m]):(m=Math.floor(Math.random()*j.length),j[m])}a.getPossibleMoves=b,a.createComputerMove=c}(aiService||(aiService={}));
//# sourceMappingURL=everything.min.js.map